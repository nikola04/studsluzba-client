<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import javafx.scene.control.cell.PropertyValueFactory?>
<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.raflab.studsluzbadesktopclient.controllers.StudentController"
            style="-fx-background-color: white;">
    <top>
        <HBox spacing="10" style="-fx-background-color: #2c3e50; -fx-padding: 20;" alignment="CENTER_LEFT">
            <VBox spacing="5">
                <Label fx:id="nameLabel" text="Student"
                       style="-fx-text-fill: white; -fx-font-size: 24px; -fx-font-weight: bold;"/>
                <HBox spacing="20">
                    <Label fx:id="avgLabel" text="Average" style="-fx-text-fill: #ecf0f1;"/>
                    <Label fx:id="espbLabel" text="ESPB" style="-fx-text-fill: #ecf0f1;"/>
                </HBox>
            </VBox>

            <Region HBox.hgrow="ALWAYS" />

            <VBox spacing="5">
            <Button text="Profile" onAction="#handleOpenEditProfile"
                    style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 12; -fx-background-radius: 6; -fx-cursor: hand;"/>
            </VBox>
        </HBox>
    </top>
    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE">
            <Tab text="Profil">
                <VBox spacing="15" style="-fx-padding: 20;">
                    <Label text="Izveštaji"
                           style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>

                    <HBox spacing="10">
                        <Button text="Uverenje o studiranju"
                                onAction="#handleUverenjeStudiranje"
                                style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15; -fx-background-radius: 6; -fx-cursor: hand;"/>

                        <Button text="Uverenje o polozenim ispitima"
                                onAction="#handleUverenjeIspiti"
                                style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 15; -fx-background-radius: 6; -fx-cursor: hand;"/>
                    </HBox>

                </VBox>
            </Tab>
            <Tab text="Ispiti">
                <VBox spacing="10">
                    <VBox spacing="10" style="-fx-padding: 15;">
                        <Label text="Polozeni ispiti" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                        <TableView fx:id="passedExamsTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="idPassedExamColumn" prefWidth="70" text="ID" />
                                <TableColumn fx:id="predmetPassedExamColumn" prefWidth="200" text="Predmet" />
                                <TableColumn fx:id="nastavnikPassedExamColumn" prefWidth="250" text="Nastavnik" />
                                <TableColumn fx:id="espbPassedExamColumn" text="ESPB" />
                                <TableColumn fx:id="rokPassedExamColumn" prefWidth="70" text="Rok" />
                            </columns>
                        </TableView>
                    </VBox>
                    <VBox spacing="10" style="-fx-padding: 15;">
                        <Label text="Nepolozeni ispiti" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                        <TableView fx:id="examsTable" VBox.vgrow="ALWAYS">
                            <columns>
                                <TableColumn fx:id="idExamColumn" prefWidth="70" text="ID" />
                                <TableColumn fx:id="predmetExamColumn" prefWidth="200" text="Predmet" />
                                <TableColumn fx:id="nastavnikExamColumn" prefWidth="250" text="Nastavnik" />
                                <TableColumn fx:id="espbExamColumn" text="ESPB" />
                                <TableColumn fx:id="rokExamColumn" text="Rok" prefWidth="70" />
                            </columns>
                        </TableView>
                    </VBox>
                </VBox>
            </Tab>

            <Tab text="Upisane Godine">
                <ScrollPane fitToWidth="true" style="-fx-background-color: transparent;">
                    <VBox spacing="20" style="-fx-padding: 15;">

                        <VBox spacing="10">
                            <HBox alignment="CENTER_LEFT">
                                <Label text="Upis" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                                <Region HBox.hgrow="ALWAYS" />
                                <Button text="Create Upis" onAction="#handleCreateUpis"
                                        style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 12; -fx-background-radius: 6; -fx-cursor: hand;"/>
                            </HBox>
                            <TableView fx:id="upisTable" prefHeight="200">
                                <columns>
                                    <TableColumn prefWidth="50" text="ID">
                                        <cellValueFactory><PropertyValueFactory property="id" /></cellValueFactory>
                                    </TableColumn>
                                    <TableColumn prefWidth="100" text="Godina">
                                        <cellValueFactory><PropertyValueFactory property="godina" /></cellValueFactory>
                                    </TableColumn>
                                    <TableColumn prefWidth="150" text="Datum Upisa">
                                        <cellValueFactory><PropertyValueFactory property="datumUpisa" /></cellValueFactory>
                                    </TableColumn>
                                    <TableColumn prefWidth="100" text="Skolska Godina">
                                        <cellValueFactory><PropertyValueFactory property="skolskaGodina" /></cellValueFactory>
                                    </TableColumn>
                                    <TableColumn prefWidth="300" text="Napomena">
                                        <cellValueFactory><PropertyValueFactory property="napomena" /></cellValueFactory>
                                    </TableColumn>
                                </columns>
                            </TableView>
                        </VBox>
                        <VBox spacing="10">
                            <HBox alignment="CENTER_LEFT">
                                <Label text="Obnova" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                                <Region HBox.hgrow="ALWAYS" />
                                <Button text="Create Obnova" onAction="#handleCreateObnova"
                                        style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 12; -fx-background-radius: 6; -fx-cursor: hand;"/>
                            </HBox>
                            <TableView fx:id="obnovaTable" prefHeight="200">
                                <columns>
                                    <TableColumn prefWidth="50" text="ID">
                                        <cellValueFactory><PropertyValueFactory property="id" /></cellValueFactory>
                                    </TableColumn>
                                    <TableColumn prefWidth="100" text="Godina">
                                        <cellValueFactory><PropertyValueFactory property="godina" /></cellValueFactory>
                                    </TableColumn>
                                    <TableColumn prefWidth="150" text="Datum Obnove">
                                        <cellValueFactory><PropertyValueFactory property="datumObnove" /></cellValueFactory>
                                    </TableColumn>
                                    <TableColumn prefWidth="100" text="Skolska Godina">
                                        <cellValueFactory><PropertyValueFactory property="skolskaGodina" /></cellValueFactory>
                                    </TableColumn>
                                    <TableColumn prefWidth="300" text="Napomena">
                                        <cellValueFactory><PropertyValueFactory property="napomena" /></cellValueFactory>
                                    </TableColumn>
                                </columns>
                            </TableView>
                        </VBox>

                    </VBox>
                </ScrollPane>
            </Tab>

            <Tab text="Uplate">
                <VBox spacing="10" style="-fx-padding: 15;">
                    <VBox spacing="5" style="-fx-background-color: #f8f9fa; -fx-padding: 10; -fx-background-radius: 5; -fx-border-color: #dee2e6; -fx-border-radius: 5;">
                        <Label text="Remaining amount" style="-fx-font-weight: bold;"/>
                        <HBox spacing="20">
                            <Label fx:id="remainingRsdLabel" text="RSD: 0.00" style="-fx-font-weight: medium;"/>
                            <Label fx:id="remainingEurLabel" text="EUR: 0.00" style="-fx-font-weight: medium;"/>
                        </HBox>
                    </VBox>
                    <HBox alignment="CENTER_LEFT">
                        <Label text="Uplate" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                        <Region HBox.hgrow="ALWAYS" />
                        <Button text="Create" onAction="#handleCreateUplata"
                                style="-fx-background-color: #3498db; -fx-text-fill: white; -fx-font-weight: bold; -fx-padding: 8 12; -fx-background-radius: 6; -fx-cursor: hand;"/>
                    </HBox>
                    <TableView fx:id="paymentsTable" VBox.vgrow="ALWAYS">
                        <columns>
                            <TableColumn prefWidth="50" text="ID">
                                <cellValueFactory><PropertyValueFactory property="id" /></cellValueFactory>
                            </TableColumn>
                            <TableColumn prefWidth="200" text="Iznos">
                                <cellValueFactory><PropertyValueFactory property="iznos" /></cellValueFactory>
                            </TableColumn>
                            <TableColumn prefWidth="100" text="Kurs">
                                <cellValueFactory><PropertyValueFactory property="kurs" /></cellValueFactory>
                            </TableColumn>
                            <TableColumn prefWidth="200" text="Datum">
                                <cellValueFactory><PropertyValueFactory property="datum" /></cellValueFactory>
                            </TableColumn>
                        </columns>
                    </TableView>
                    <HBox spacing="10" alignment="CENTER_LEFT">
                        <Button text="−" onAction="#handleDeletePayment" style="-fx-background-color: #e74c3c; -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 5; -fx-min-width: 40;" />
                        <Label text="Select row for deletion" style="-fx-text-fill: #95a5a6; -fx-font-size: 11px;" />
                    </HBox>
                </VBox>
            </Tab>
        </TabPane>
    </center>
</BorderPane>